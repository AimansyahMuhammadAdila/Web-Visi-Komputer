<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Machine Learning - GLCM, KNN, Naive Bayes</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <div class=" container">
        <div class="header">
            <h1>ğŸ”¬ Aplikasi Machine Learning untuk Vision & Data Processing</h1>
            <p>GLCM Feature Extraction â€¢ KNN Regression â€¢ Naive Bayes Classification</p>
        </div>

        <div class="tabs">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="switchTab('minggu1')">
                    Minggu 1 - Ekstraksi Fitur GLCM
                </button>
                <button class="tab-button" onclick="switchTab('minggu2')">
                    Minggu 2 -prediksi Harga KNN
                </button>
                <button class="tab-button" onclick="switchTab('minggu3')">
                    Minggu 3 - Naive Bayes Classifier
                </button>
            </div>

            <!-- ==================== TAB MINGGU 1: GLCM ==================== -->
            <div id="minggu1" class="tab-content active">
                <div class="main-content">
                    <div>
                        <div class="card">
                            <h2>ğŸ“¤ Upload Gambar</h2>
                            <div class="upload-area" onclick="document.getElementById('imageInput').click()">
                                <input type="file" id="imageInput" accept="image/*" onchange="handleImageUpload(event)">
                                <div class="upload-icon">ğŸ“·</div>
                                <p style="color: #475569; margin-bottom: 5px;">Klik untuk memilih gambar</p>
                                <p style="color: #64748b; font-size: 14px;">Format: JPEG, PNG</p>
                            </div>
                            <img id="previewImage" class="preview-image" style="display: none;">
                        </div>

                        <div class="card" id="angleCard" style="display: none; margin-top: 20px;">
                            <h2>ğŸ¯ Pilih Sudut GLCM</h2>
                            <div class="angle-selector">
                                <button class="angle-button active" onclick="selectAngle(0)">0Â°</button>
                                <button class="angle-button" onclick="selectAngle(45)">45Â°</button>
                                <button class="angle-button" onclick="selectAngle(90)">90Â°</button>
                                <button class="angle-button" onclick="selectAngle(135)">135Â°</button>
                            </div>
                            <button class="process-button" onclick="processImage()">
                                ğŸ§® Hitung Fitur GLCM
                            </button>
                        </div>
                    </div>

                    <div>
                        <div class="card info-card">
                            <h3>â„¹ï¸ Tentang Fitur GLCM</h3>
                            <p><strong>Contrast:</strong> Mengukur perbedaan intensitas lokal dalam gambar</p>
                            <p><strong>Dissimilarity:</strong> Mengukur ketidaksamaan antara pixel</p>
                            <p><strong>Homogeneity:</strong> Mengukur keseragaman tekstur</p>
                            <p><strong>Energy:</strong> Mengukur keseragaman distribusi pixel</p>
                            <p><strong>ASM:</strong> Angular Second Moment - kuadrat dari energy</p>
                            <p><strong>Correlation:</strong> Mengukur korelasi linear antara pixel</p>
                        </div>

                        <div class="card" id="resultsCard" style="display: none; margin-top: 20px;">
                            <h2>ğŸ“Š Hasil Ekstraksi Fitur</h2>
                            <div class="loading" id="loading">
                                <p>â³ Memproses gambar...</p>
                            </div>
                            <div id="resultsContent"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!--==================== TAB MINGGU 2: KNN PREDICTION ==================== -->
            <div id="minggu2" class="tab-content">
                <div class="knn-wrapper">
                    <div class="knn-header">
                        <h2>ğŸŒ¾ Prediksi Harga Beras menggunakan KNN Regression</h2>
                        <p class="subtitle">Masukkan data Luas Panen dan Hasil Produksi untuk memprediksi harga beras
                        </p>
                    </div>

                    <div class="knn-main-content">
                        <div class="knn-left">
                            <div class="card">
                                <h3 class="card-title">ğŸ“ Input Data</h3>
                                <form id="knnForm" onsubmit="processKNN(event)">
                                    <div class="form-group">
                                        <label for="luas_panen">
                                            <span class="label-icon">ğŸŒ±</span>
                                            Luas Panen (ha)
                                        </label>
                                        <input type="number" id="luas_panen" name="luas_panen" step="0.01" min="0"
                                            placeholder="Contoh: 3000" required>
                                        <small class="input-hint">Rentang: 1000 - 5000 ha</small>
                                    </div>

                                    <div class="form-group">
                                        <label for="hasil_produksi">
                                            <span class="label-icon">ğŸ“¦</span>
                                            Hasil Produksi (ton)
                                        </label>
                                        <input type="number" id="hasil_produksi" name="hasil_produksi" step="0.01"
                                            min="0" placeholder="Contoh: 5000" required>
                                        <small class="input-hint">Rentang: 2000 - 8000 ton</small>
                                    </div>

                                    <div class="form-group">
                                        <label for="nilai_k">
                                            <span class="label-icon">ğŸ¯</span>
                                            Nilai K (Tetangga Terdekat)
                                        </label>
                                        <input type="number" id="nilai_k" name="nilai_k" value="2" min="1" max="10"
                                            required>
                                        <small class="input-hint">ğŸ’¡ Nilai optimal dari jurnal: K = 2</small>
                                    </div>

                                    <div class="form-group feature-select-group">
                                        <label class="main-label">
                                            <span class="label-icon">âœ…</span>
                                            Pilih Fitur yang Digunakan
                                        </label>
                                        <div class="checkbox-wrapper">
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="features" value="luas_panen" checked>
                                                <span class="checkbox-custom"></span>
                                                <span class="checkbox-text">Luas Panen</span>
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="features" value="hasil_produksi" checked>
                                                <span class="checkbox-custom"></span>
                                                <span class="checkbox-text">Hasil Produksi</span>
                                            </label>
                                        </div>
                                        <small class="input-hint">Pilih minimal satu fitur</small>
                                    </div>

                                    <button type="submit" class="process-button knn-button">
                                        ğŸ”® Prediksi Harga Beras
                                    </button>
                                </form>
                            </div>

                            <div class="card info-card" style="margin-top: 20px;">
                                <h3>ğŸ“š Tentang KNN Regression</h3>
                                <p><strong>K-Nearest Neighbor (KNN)</strong> adalah algoritma machine learning yang
                                    memprediksi nilai berdasarkan K tetangga terdekat.</p>
                                <p><strong>Dataset:</strong> Menggunakan data harga beras Indonesia (Januari 2019 -
                                    Desember 2021)</p>
                                <p><strong>Normalisasi:</strong> Min-Max Normalization (0-1)</p>
                                <p><strong>Evaluasi:</strong> MAE = 55.55, RMSE = 81.64 (K=2)</p>
                            </div>
                        </div>

                        <div class="knn-right">
                            <div id="loadingKNN" class="loading">
                                <div class="loading-spinner"></div>
                                <p>â³ Memproses prediksi...</p>
                            </div>

                            <div id="resultKNN" class="card" style="display: none;">
                                <h3 class="card-title">ğŸ“Š Hasil Prediksi</h3>
                                <div id="knnResultContent"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== TAB MINGGU 3: NAIVE BAYES ==================== -->
            <div id="minggu3" class="tab-content">
                <div class="nb-wrapper">
                    <div class="nb-header">
                        <h2>ğŸ§  Klasifikasi Data menggunakan Naive Bayes</h2>
                        <p class="subtitle">Upload dataset CSV custom untuk analisis menggunakan Gaussian Naive Bayes
                        </p>
                    </div>

                    <div class="nb-main-content">
                        <div class="nb-left">
                            <div class="card">
                                <h3 class="card-title">ğŸ“¤ Upload Dataset CSV</h3>
                                <div class="csv-upload-area" id="csvUploadArea"
                                    onclick="document.getElementById('csvInput').click()">
                                    <input type="file" id="csvInput" accept=".csv" onchange="handleCSVUpload(event)"
                                        style="display: none;">
                                    <div class="upload-icon">ğŸ“Š</div>
                                    <p style="color: #475569; margin-bottom: 5px;">Klik atau drag & drop file CSV</p>
                                    <p style="color: #64748b; font-size: 14px;">Format: CSV dengan header</p>
                                    <p style="color: #64748b; font-size: 12px; margin-top: 10px;">Kolom terakhir akan
                                        digunakan sebagai target/label</p>
                                </div>

                                <div id="csvInfo" class="csv-info" style="display: none; margin-top: 15px;">
                                    <p><strong>File:</strong> <span id="csvFileName"></span></p>
                                    <p><strong>Jumlah baris:</strong> <span id="csvRows"></span></p>
                                    <p><strong>Jumlah kolom:</strong> <span id="csvCols"></span></p>
                                </div>

                                <div class="form-group" style="margin-top: 20px;">
                                    <label for="test_size_nb">
                                        <span class="label-icon">ğŸ“</span>
                                        Test Size Ratio
                                    </label>
                                    <input type="number" id="test_size_nb" value="0.3" min="0.1" max="0.5" step="0.05">
                                    <small class="input-hint">Proporsi data untuk testing (default: 30%)</small>
                                </div>

                                <button id="btnProcessNB" class="process-button nb-button" onclick="processNaiveBayes()"
                                    disabled>
                                    ğŸ§® Klasifikasi dengan Naive Bayes
                                </button>
                            </div>

                            <div class="card info-card" style="margin-top: 20px;">
                                <h3>ğŸ“š Tentang Naive Bayes</h3>
                                <p><strong>Gaussian Naive Bayes</strong> adalah algoritma klasifikasi probabilistik yang
                                    cocok untuk data kontinu.</p>
                                <p><strong>Format CSV:</strong> Header di baris pertama, kolom terakhir = target class
                                </p>
                                <p><strong>Data:</strong> Semua fitur harus numerik, target berupa class label (0, 1, 2,
                                    ...)</p>
                                <p><strong>Metrics:</strong> Accuracy, Precision, Recall, F1-Score</p>
                            </div>
                        </div>

                        <div class="nb-right">
                            <div id="dataPreview" class="card" style="display: none;">
                                <h3 class="card-title">ğŸ‘€ Preview Data</h3>
                                <div id="dataPreviewContent" class="data-preview-scroll"></div>
                            </div>

                            <div id="loadingNB" class="loading">
                                <div class="loading-spinner"></div>
                                <p>â³ Memproses klasifikasi...</p>
                            </div>

                            <div id="resultNB" class="card" style="display: none;">
                                <h3 class="card-title">ğŸ“Š Hasil Klasifikasi</h3>
                                <div id="nbResultContent"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>